@model DeAnWEB.Models.ViewModel.HomeProductVM
<link rel="stylesheet" type="text/css" href="~/Content/Css/Home.css" />

@{
    Func<IEnumerable<DeAnWEB.Models.Product>, string, IEnumerable<DeAnWEB.Models.Product>> filterByCat =
        (list, cat) => list.Where(p => p.Category != null && p.Category.CategoryName == cat);
}

@{
    var categories = new[] { "Giày Nikke", "Giày Adidas", "Giày Sneaker" };
}

@foreach (var cat in categories)
{
    var items = filterByCat(Model.NewProducts, cat).ToList();

    if (items.Any())
    {
        <section class="container-fluid featureProd">
            <h2>@cat</h2>

            <div class="feature-container">

                @foreach (var p in items)
                {
                    <div class="fproduct-item">
                        <a href="@Url.Action("ProductDetails", "Homes", new { id = p.ProductID })">
                            <img src="@(!string.IsNullOrEmpty(p.ProductImage) ? Url.Content(p.ProductImage) : Url.Content("~/Content/no-image.png"))" />
                            <p class="prodPrice">@p.ProductPrice.ToString("N0") đ</p>
                            <p class="prodName">@p.ProductName</p>                           
                        </a>
                    </div>
                }

            </div>
        </section>
    }
}
