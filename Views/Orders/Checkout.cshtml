﻿@model DeAnWEB.Models.ViewModel.CheckoutVM

@{
    ViewBag.Title = "Pay";
}
@section styles {
    <link rel="stylesheet" href="~/Content/Css/DeliverLocate.css" />
    <link rel="stylesheet" href="~/Content/Css/Payment_List.css" />
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh toán</title>
</head>
<body>
    @using (Html.BeginForm("Checkout", "Orders", FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        <div class="allpage">
            <main class="checkout-container">
                <!-- LEFT SIDE -->

                <section class="checkout-left">
                    <div class="section-heading">
                        <h3>Thông tin liên lạc</h3>
                    </div>
                    <!-- EMAIL -->
                    <div class="form-field-group">
                        @Html.LabelFor(m => m.Email)
                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "example@gmail.com", maxlength = "30" })
                        @Html.ValidationMessageFor(m => m.Email, "", new { @class = "error-text" })
                    </div>
                    <div class="checkbox-container">
                        <input type="checkbox" id="subscribe" checked>
                        <label for="subscribe">Gửi cho tôi tin tức và ưu đãi qua email</label>
                    </div>

                    <h3>Địa chỉ giao hàng</h3>
                    <p class="shipping-note">Địa chỉ này cũng sẽ được dùng làm địa chỉ thanh toán cho đơn hàng này.</p>

                    <div class="form-field-group">
                        <div>
                            <select id="country">
                                <option>Việt Nam</option>
                            </select>
                        </div>
                    </div>

                    <!-- NAME -->
                    <h3>Thông tin người nhận</h3>
                    <div class="form-field-group">
                        @Html.LabelFor(m => m.Name)
                        @Html.TextBoxFor(m => m.Name, new { @class = "form-control", placeholder = "Tên người nhận", maxlength = "30" })
                        @Html.ValidationMessageFor(m => m.Name, "", new { @class = "error-text" })
                    </div>


                    <!-- ADDRESS -->
                    <h3>Địa chỉ giao hàng</h3>
                    <div class="form-field-group">
                        @Html.LabelFor(m => m.ShippingAddress)
                        @Html.TextBoxFor(m => m.ShippingAddress, new { @class = "form-control", placeholder = "Số nhà, đường, hẻm...", maxlength = "50" })
                        @Html.ValidationMessageFor(m => m.ShippingAddress, "", new { @class = "error-text" })
                    </div>

                    <div class="form-field-group">
                        <div>
                            <select id="city" class="error-border">
                                <option value="Hồ Chí Minh">Hồ Chí Minh</option>
                                <option value="Hà Nội">Hà Nội</option>
                                <option value="Đà Lạt">Đà Lạt</option>
                            </select>
                        </div>
                        <div>
                            <input type="text" id="zipCode" placeholder="Mã bưu điện (Thông tin điền tự động...)" value="0123531" disabled>
                            <div class="error-text" id="err-zipCode"></div>
                        </div>
                    </div>



                    <!-- PHONE -->
                    <div class="form-field-group">
                        @Html.LabelFor(m => m.Phone)
                        @Html.TextBoxFor(m => m.Phone, new { @class = "form-control", placeholder = "0xxxxxxxxx", maxlength = "10" })
                        @Html.ValidationMessageFor(m => m.Phone, "", new { @class = "error-text" })
                    </div>

                    <div class="checkbox-container">
                        <input type="checkbox" id="saveAddress">
                        <label for="saveAddress">Lưu địa chỉ này</label>
                    </div>

                    <!-- SUBMIT BUTTON -->
                    <div class="action-buttons">
                        <a href="@Url.Action("Index", "Carts")" class="back-link">&lt; Quay lại giỏ hàng</a>
                        <button type="submit" class="pay-button">Xác nhận thanh toán ></button>
                    </div>
                </section>

                <!-- RIGHT SECTION -->
                <section class="checkout-right">
                    <h3>Đơn hàng</h3>
                    @foreach (var item in Model.CartItems)
                    {
                        <div class="product">
                            <div class="product-image-container">
                                <img src="@item.ProductImage" />
                                <span class="quantity-badge">@item.Quantity</span>
                            </div>

                            <div class="product-info">
                                <p class="product-name">@item.ProductName</p>
                            </div>

                            <p class="product-price">@item.TotalPrice.ToString("N0") ₫</p>
                        </div>
                    }

                    <div class="summary-line">
                        <span>Tổng tiền hàng</span>
                        <span class="amount">@Model.TotalAmount.ToString("N0") ₫</span>
                    </div>
                    <div class="mb-3">
                        @Html.Label("Phương thức giao hàng", new { @class = "col-form-label col-md-6" })
                        <div class="col-md-10">
                            @Html.RadioButtonFor(m => m.ShippingMethod, "Giao hàng nhanh") Giao hàng nhanh <br />
                            @Html.RadioButtonFor(m => m.ShippingMethod, "Giao hàng tiết kiệm") Giao hàng tiết kiệm
                            <br />
                            @Html.ValidationMessageFor(m => m.ShippingMethod, "", new { @class = "error-text" })
                        </div>
                    </div>
                    <br />
                    <div class="summary-line">
                        <span>Phí vận chuyển </span>
                        <span class="amount">MIỄN PHÍ</span>
                    </div>
                    <h3>Thanh toán</h3>
                    <p class="payment-note">Địa chỉ thanh toán của phương thức thanh toán phải khớp với địa chỉ giao hàng. Toàn bộ các giao dịch được bảo mật và mã hóa.</p>

                    <div class="payment-method">
                        <div class="payment-options">
                            @Html.RadioButtonFor(m => m.PaymentMethod, "onepay", new { @id = "onepay" })
                            <label for="onepay" class="payment-option">
                                <span class="payment-name">Cổng OnePAY - Thẻ ATM/QR/MoMo</span>
                                <div class="card-logos">
                                    <img src="~/Content/Images/VISA.jfif" alt="VISA" />
                                    <img src="~/Content/Images/mastercard.jpg" alt="MasterCard" />
                                    <img src="~/Content/Images/JCB.jpg" alt="JCB" />
                                    <img src="~/Content/Images/MoMo.jpg" alt="MoMo" />
                                </div>
                            </label>

                            @Html.RadioButtonFor(m => m.PaymentMethod, "installment", new { @id = "installment" })
                            <label for="installment" class="payment-option">
                                <span class="payment-name">Trả góp 0% lãi suất qua thẻ tín dụng</span>
                                <div class="card-logos-small">
                                    <img src="~/Content/Images/VISA.jfif" alt="VISA" />
                                    <img src="~/Content/Images/mastercard.jpg" alt="MasterCard" />
                                    <img src="~/Content/Images/JCB.jpg" alt="JCB" />
                                    <img src="~/Content/Images/AMEX.jpg" alt="Amex" />
                                </div>
                            </label>

                            @Html.RadioButtonFor(m => m.PaymentMethod, "zalopay", new { @id = "zalopay" })
                            <label for="zalopay" class="payment-option">
                                <span class="payment-name">Ví ZaloPay</span>
                                <div class="card-logos-small">
                                    <img src="~/Content/Images/Zalo.jpg" alt="ZaloPay" />
                                    <img src="~/Content/Images/mastercard.jpg" alt="MasterCard" />
                                    <img src="~/Content/Images/VISA.jfif" alt="VISA" />
                                </div>
                            </label>

                            @Html.RadioButtonFor(m => m.PaymentMethod, "momo-onepay", new { @id = "momo-onepay" })
                            <label for="momo-onepay" class="payment-option">
                                <span class="payment-name">Thanh toán MoMo qua OnePay</span>
                                <div class="card-logos-small">
                                    <img src="~/Content/Images/MoMo.jpg" alt="MoMo" />
                                    <img src="~/Content/Images/Onepay.jpg" alt="OnePay" />
                                </div>
                            </label>

                            @Html.RadioButtonFor(m => m.PaymentMethod, "cod", new { @id = "cod" })
                            <label for="cod" class="payment-option">
                                <span class="payment-name">Thanh toán khi nhận hàng (COD)</span>
                            </label>
                        </div>
                    </div>
                    @Html.ValidationMessageFor(m => m.PaymentMethod, "", new { @class = "error-text" })

                    <div class="terms-agreement">
                        <input type="checkbox" id="terms" checked>
                        <label for="terms">Tôi đồng ý với <a href="#">Điều khoản và Chính sách</a> quy định bởi Supersports*</label>
                    </div>

                    <div class="total-section">
                        <span class="total-label">Tổng thanh toán</span>
                        <div class="total-amount-container">
                            <span class="total-final-amount">@Model.TotalAmount.ToString("N0") ₫</span>
                        </div>
                    </div>
                </section>                
            </main>
        </div>
    }
</body>
</html>

@section scripts {
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")
}


